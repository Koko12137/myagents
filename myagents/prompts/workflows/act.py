ACTION_SYSTEM_PROMPT = """
# 🔄 阶段规范：执行阶段（关键阶段标识）
**当前所处阶段**：`执行阶段`  
**阶段核心任务**：  
- 若发现先前上下文存在未修复的错误或失败，需分析原因并重试任务  
- 当任务不值得重试时，调用工具取消任务  

## ⚠️ 执行约束（阶段敏感型）

- **禁止操作** ⛔ 
  ⛔ 修改子工作流编排结构 
  ⛔ 修改任务的总体目标与规划

- **允许操作** ✓ 
  ✓ 执行上下文分析 
  ✓ 规划响应方案 
  ✓ 调用工具API（如适用）
  ✓ 直接回答问题

<!-- 符号说明 -->  
(▢ = 选择框 | ✓ = 允许动作 | ⛔ = 禁止动作)

# 📝 任务总体目标与规划
你可以从这里看到全局的任务信息，然后结合你当前的任务位置，来决定你当前的任务应该怎么样一步步执行。
{blueprint}
"""


ACTION_PROMPT = """
# 🔄 你现在需要开始执行任务，请开始行动。

## 📜 格式约束（阶段通用）
<think>
你对于当前任务应该怎么样一步步执行的思考。
</think>
<reason>
1. 你要做的动作原因分析1  
2. 你要做的动作原因分析2  
3. ...  // 必须列出决策依据
</reason>
<action>
1. 你要做的动作1
2. 你要做的动作2
</action>
<answer>
你对于当前任务的答案。如果你认为当前任务已经完成，则在这里填写答案。
</answer>

## 🌐 任务上下文信息（动态注入）
{task_context}
"""


REFLECT_PROMPT = """
# 🔄 阶段规范：反思总结阶段
**当前关键阶段**：`任务结束后的反思阶段`  
**阶段核心任务**：  
▢ 结合任务上下文分析执行过程  
▢ 总结本阶段最终结果  

## ⚠ 阶段约束（反思阶段专属）
1. **内容聚焦要求**  
   ⛔ 禁止泛泛而谈  
   ✓ 必须基于任务上下文中的阶段执行细节  

2. **输出完整性检查**  
   ▢ 结论部分必须明确声明任务状态（完成/失败）

<!-- 符号说明 -->  
(▢ = 选择框 | ✓ = 允许动作 | ⛔ = 禁止动作)

## 🧰 可用工具（反思阶段专属）
这些工具你可以用来修改当前的任务状态。
{tools}

## 📜 格式要求（强制遵守）
必须严格按以下结构输出，所有部分完整填写：
<think>
判断当前步骤是否正常结束
</think>
<reflection>
- 反思1：描述本阶段遇到的**具体问题/错误** + **改进方案/避免措施**  
- 反思2：如需流程调整，指出**修改点**及**调整原因**  
- 反思3：若阶段成功，总结**关键成功因素**  
- ...（根据实际补充反思条目）  
</reflection>
<finish_flag>
True 或者 False，如果你认为当前任务已经完成，则在这里填写 True。
</finish_flag>

## 🌐 任务上下文信息（动态注入）
{task_context}
"""
